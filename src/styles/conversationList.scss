// ConversationList styles using Cloudscape design tokens
// Supports grouped conversations by time period
@use '@cloudscape-design/design-tokens/index.scss' as cs;

.conversation-list {
  display: flex;
  flex-direction: column;
  gap: cs.$space-static-xxs;
  max-height: calc(100vh - 350px); // Dynamic height based on viewport
  min-height: 200px;
  overflow-y: auto;
  margin: 0 calc(-1 * cs.$space-scaled-s);
  padding: cs.$space-scaled-xxs cs.$space-scaled-s;

  // Custom scrollbar - subtle and unobtrusive
  &::-webkit-scrollbar {
    width: 4px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background-color: cs.$color-border-divider-default;
    border-radius: 2px;

    &:hover {
      background-color: cs.$color-text-body-secondary;
    }
  }
}

// Group styling
.conversation-group {
  &__label {
    font-size: cs.$font-size-body-s;
    font-weight: cs.$font-weight-heading-xs;
    color: cs.$color-text-body-default;
  }

  &__count {
    font-weight: 400;
    color: cs.$color-text-body-secondary;
    font-size: cs.$font-size-body-s;
  }

  &__items {
    display: flex;
    flex-direction: column;
    gap: cs.$space-static-xxxs;
    padding-top: cs.$space-static-xxs;
  }
}

// Override Cloudscape ExpandableSection styles for sidebar groups
.conversation-list {
  // Give expandable section headers proper spacing
  [class*='awsui_header-wrapper'] {
    padding: cs.$space-scaled-xs cs.$space-scaled-s !important;
    margin: 0 calc(-1 * cs.$space-scaled-s);
    border-radius: cs.$border-radius-item;

    &:hover {
      background-color: cs.$color-background-dropdown-item-hover;
    }
  }

  [class*='awsui_content'] {
    padding: 0 !important;
  }

  // Ensure the expand/collapse icon is visible
  [class*='awsui_icon'] {
    color: cs.$color-text-body-secondary;
  }
}
.conversation-item {
  padding: cs.$space-scaled-xs cs.$space-scaled-s;
  border-radius: cs.$border-radius-item;
  cursor: pointer;
  transition:
    background-color cs.$motion-duration-responsive cs.$motion-easing-responsive,
    border-color cs.$motion-duration-responsive cs.$motion-easing-responsive;
  border: 1px solid transparent;
  background-color: transparent;

  // Hover state - light fill per Cloudscape visual styles
  &:hover {
    background-color: cs.$color-background-dropdown-item-hover;
    border-color: cs.$color-border-divider-default;

    .conversation-item__delete {
      opacity: 1;
    }

    .conversation-item__meta {
      color: cs.$color-text-body-default;
    }
  }

  // Focus state - blue focus ring per Cloudscape states
  &:focus {
    outline: 2px solid cs.$color-border-item-focused;
    outline-offset: -2px;
    border-radius: cs.$border-radius-item;
  }

  // Active/selected state - blue highlight per Cloudscape states
  &--active {
    background-color: cs.$color-background-item-selected;
    border-color: cs.$color-border-item-selected;

    &:hover {
      background-color: cs.$color-background-item-selected;
      border-color: cs.$color-border-item-selected;
    }

    .conversation-item__title {
      color: cs.$color-text-interactive-active;
      font-weight: cs.$font-weight-heading-xs;
    }

    .conversation-item__provider-icon {
      opacity: 1;
    }
  }

  &__content {
    display: flex;
    flex-direction: column;
    gap: cs.$space-static-xxxs;
    min-width: 0;
  }

  &__header {
    display: flex;
    align-items: center;
    gap: cs.$space-scaled-xs;
    min-width: 0;
  }

  &__provider-icon {
    width: 14px;
    height: 14px;
    opacity: 0.6;
    flex-shrink: 0;
    transition: opacity cs.$motion-duration-responsive cs.$motion-easing-responsive;
  }

  &__title {
    font-size: cs.$font-size-body-s;
    line-height: cs.$line-height-body-s;
    color: cs.$color-text-body-default;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
    min-width: 0;
  }

  &__meta {
    display: flex;
    align-items: center;
    gap: cs.$space-scaled-xs;
    font-size: cs.$font-size-body-s;
    color: cs.$color-text-body-secondary;
    padding-left: calc(14px + cs.$space-scaled-xs); // Align with title (icon width + gap)
    transition: color cs.$motion-duration-responsive cs.$motion-easing-responsive;
  }

  &__time {
    font-size: cs.$font-size-body-s;
    font-variant-numeric: tabular-nums;
  }

  &__count {
    font-size: cs.$font-size-body-s;

    &::before {
      content: 'Â·';
      margin-right: cs.$space-static-xxs;
      color: cs.$color-text-body-secondary;
    }
  }

  &__delete {
    margin-left: auto;
    padding: cs.$space-static-xxxs;
    background: none;
    border: none;
    cursor: pointer;
    opacity: 0;
    transition:
      opacity cs.$motion-duration-responsive cs.$motion-easing-responsive,
      color cs.$motion-duration-responsive cs.$motion-easing-responsive,
      background-color cs.$motion-duration-responsive cs.$motion-easing-responsive;
    color: cs.$color-text-body-secondary;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: cs.$border-radius-button;
    line-height: 0;

    &:hover {
      color: cs.$color-text-status-error;
      background-color: cs.$color-background-button-normal-hover;
    }

    &:focus {
      opacity: 1;
      outline: 2px solid cs.$color-border-item-focused;
      outline-offset: -2px;
    }
  }
}

// Empty state styling
.conversation-list-empty {
  padding: cs.$space-scaled-m cs.$space-scaled-s;
  text-align: center;

  &__icon {
    color: cs.$color-text-body-secondary;
    margin-bottom: cs.$space-scaled-xxs;
  }

  &__title {
    font-size: cs.$font-size-body-s;
    color: cs.$color-text-body-secondary;
    margin-bottom: cs.$space-static-xxxs;
  }

  &__hint {
    font-size: cs.$font-size-body-s;
    color: cs.$color-text-body-secondary;
  }
}
